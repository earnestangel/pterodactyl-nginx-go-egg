{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v2",
        "update_url": null
    },
    "exported_at": "2026-01-29T00:00:00+00:00",
    "name": "Pterodactyl Nginx + Go Lang Egg",
    "author": "YmoT@tuta.com",
    "description": "Pterodactyl Nginx Egg (Go Lang)\r\n\r\nThis egg provides a web server solution for Pterodactyl featuring:\r\n\r\n✅ Nginx Reverse Proxy\r\n✅ Go (Golang) Runtime Support\r\n✅ Git Auto Deployment\r\n✅ Cloudflare Tunnel Integration\r\n✅ HTTPS Support\r\n✅ Works on AMD64 & ARM64\r\n\r\nPerfect for hosting Go web servers such as Gin, Fiber, Echo, or raw net/http apps.",
    "features": null,
    "docker_images": {
        "ririkoai/pterodactyl-nginx-go:latest": "ririkoai/pterodactyl-nginx-go:latest"
    },
    "file_denylist": [],
    "startup": "./start-modules.sh",
    "config": {
        "files": "{\r\n    \"nginx/conf.d/default.conf\": {\r\n        \"parser\": \"file\",\r\n        \"find\": {\r\n            \"    listen\": \"    listen {{server.build.default.port}};\"\r\n        }\r\n    }\r\n}",
        "startup": "{\r\n    \"done\": \"Services successfully launched\"\r\n}",
        "logs": "{\r\n    \"location\": \"logs/latest.log\"\r\n}",
        "stop": "^C & ^C"
    },
    "scripts": {
        "installation": {
            "script": "#!/bin/bash\n\n# [SETUP] Install necessary packages, including git\necho -e \"[SETUP] Install packages\"\napt-get update -qq > /dev/null 2>&1 && apt-get install -qq > /dev/null 2>&1 -y git wget\n\n# Change to server directory\ncd /mnt/server\n\n# [SETUP] Create necessary folders\necho -e \"[SETUP] Create folders\"\nmkdir -p logs tmp www goapp\n\n# Clone the default repository into a temporary directory\necho \"[Git] Cloning default repository 'https://github.com/earnestangel/pterodactyl-nginx-go-egg' into temporary directory.\"\ngit clone https://github.com/earnestangel/pterodactyl-nginx-go-egg /mnt/server/gtemp > /dev/null 2>&1 \\\n    && echo \"[Git] Repository cloned successfully.\" \\\n    || { echo \"[Git] Error: Default repository clone failed.\"; exit 21; }\n\n# Copy only nginx related folders and files from the temporary repository\necho \"[Git] Copying folder and files from default repository.\"\ncp -r /mnt/server/gtemp/nginx /mnt/server || { echo \"[Git] Error: Copying 'nginx' folder failed.\"; exit 22; }\ncp -r /mnt/server/gtemp/modules /mnt/server || { echo \"[Git] Error: Copying 'modules' folder failed.\"; exit 22; }\ncp /mnt/server/gtemp/start-modules.sh /mnt/server || { echo \"[Git] Error: Copying 'start-modules.sh' file failed.\"; exit 22; }\ncp /mnt/server/gtemp/LICENSE /mnt/server || { echo \"[Git] Error: Copying 'LICENSE' file failed.\"; exit 22; }\n\nchmod +x /mnt/server/start-modules.sh\nfind /mnt/server/modules -type f -name \"*.sh\" -exec chmod +x {} \\;\n\n# Remove the temporary cloned repository\nrm -rf /mnt/server/gtemp\n\n# Check if GIT_ADDRESS is set\nif [ -z \"${GIT_ADDRESS}\" ]; then\n    echo \"[Git] Info: GIT_ADDRESS is not set.\"\n    echo \"[Git] Git operations are disabled. Skipping Git actions.\"\nelse\n    # Add .git suffix to GIT_ADDRESS if it's not present\n    if [[ ${GIT_ADDRESS} != *.git ]]; then\n        GIT_ADDRESS=\"${GIT_ADDRESS}.git\"\n        echo \"[Git] Added .git suffix to GIT_ADDRESS: ${GIT_ADDRESS}\"\n    fi\n\n    # If username and access token are provided, use authenticated access\n    if [ -n \"${USERNAME}\" ] && [ -n \"${ACCESS_TOKEN}\" ]; then\n        echo \"[Git] Using authenticated Git access.\"\n\n        # Extract the domain and the rest of the URL\n        GIT_DOMAIN=$(echo \"${GIT_ADDRESS}\" | cut -d/ -f3)\n        GIT_REPO=$(echo \"${GIT_ADDRESS}\" | cut -d/ -f4-)\n\n        # Construct authenticated Git URL\n        GIT_ADDRESS=\"https://${USERNAME}:${ACCESS_TOKEN}@${GIT_DOMAIN}/${GIT_REPO}\"\n\n        echo \"[Git] Updated GIT_ADDRESS for authenticated access: ${GIT_ADDRESS}\"\n    else\n        echo \"[Git] Using anonymous Git access.\"\n    fi\n\n    # Check if the 'goapp' directory exists, if not create it\n    if [ ! -d /mnt/server/goapp ]; then\n        echo \"[Git] Creating /mnt/server/goapp directory.\"\n        mkdir -p /mnt/server/goapp\n    else\n        rm -rf /mnt/server/goapp && mkdir -p /mnt/server/goapp\n    fi\n\n    cd /mnt/server/goapp || { echo \"[Git] Error: Could not access /mnt/server/goapp directory.\"; exit 1; }\n\n    if [ \"$(ls -A /mnt/server/goapp)\" ]; then\n        echo \"[Git] /mnt/server/goapp directory is not empty.\"\n\n        # Check if .git directory exists\n        if [ -d .git ]; then\n            echo \"[Git] .git directory exists in 'goapp'.\"\n\n            # Check if .git/config exists\n            if [ -f .git/config ]; then\n                echo \"[Git] Loading repository info from git config in 'goapp'.\"\n                ORIGIN=$(git config --get remote.origin.url)\n            else\n                echo \"[Git] Error: .git/config not found in 'goapp'. Not a valid Git repository.\"\n                exit 10\n            fi\n        else\n            echo \"[Git] Error: Directory contains files but no Git repository found in 'goapp'.\"\n            exit 11\n        fi\n\n        # Check if origin matches the provided GIT_ADDRESS\n        if [ \"${ORIGIN}\" == \"${GIT_ADDRESS}\" ]; then\n            echo \"[Git] Repository origin matches. Pulling latest changes from ${GIT_ADDRESS} in 'goapp'.\"\n            git pull || { echo \"[Git] Error: git pull failed for 'goapp'.\"; exit 12; }\n        else\n            echo \"[Git] Error: Repository origin does not match the provided GIT_ADDRESS in 'goapp'.\"\n            exit 13\n        fi\n    else\n        # Directory is empty, clone the repository\n        echo \"[Git] /mnt/server/goapp directory is empty. Cloning ${GIT_ADDRESS} into /mnt/server/goapp.\"\n        git clone ${GIT_ADDRESS} . > /dev/null 2>&1 \\\n            && echo \"[Git] Repository cloned successfully.\" \\\n            || { echo \"[Git] Error: git clone failed for 'goapp'.\"; exit 14; }\n    fi\nfi\n\necho -e \"[DONE] Everything has been installed successfully\"\necho -e \"[INFO] You can now start the nginx + Go server\"\n",
            "container": "debian:bookworm-slim",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "Enable LogCleaner Module",
            "description": "Set to true to run the log cleanup module on container startup, or false to disable it.",
            "env_variable": "LOGCLEANER_STATUS",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "boolean"
        },
        {
            "name": "Enable Git Module",
            "description": "Set to true to enable the Git update module, or false to disable it.",
            "env_variable": "GIT_STATUS",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "text"
        },
        {
            "name": "Git Repo Address",
            "description": "Git repo to clone\r\n\r\nExample: https://github.com/user/project",
            "env_variable": "GIT_ADDRESS",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string",
            "field_type": "text"
        },
        {
            "name": "Git Branch",
            "description": "Branch to pull from GitHub.\r\n\r\nLeave blank for default branch.",
            "env_variable": "BRANCH",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string",
            "field_type": "text"
        },
        {
            "name": "Git Username",
            "description": "Username for Git authentication (if private repo).",
            "env_variable": "USERNAME",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string",
            "field_type": "text"
        },
        {
            "name": "Git Access Token",
            "description": "Access token/password for Git authentication.\r\n\r\nRecommended: Personal Access Token.",
            "env_variable": "ACCESS_TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string",
            "field_type": "text"
        },
        {
            "name": "Enable Cloudflare Tunnel",
            "description": "Set to true to start the Cloudflared tunnel on container startup.",
            "env_variable": "CLOUDFLARED_STATUS",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "text"
        },
        {
            "name": "Cloudflared Tunnel Token",
            "description": "Token used to authenticate Cloudflare Tunnel (starts with ey...).",
            "env_variable": "CLOUDFLARED_TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|regex:/^[A-Za-z0-9_-]+$/",
            "field_type": "text"
        },
        {
            "name": "Go Run Command",
            "description": "Command used to start your Go application.\r\n\r\nExamples:\r\n- go run main.go\r\n- go run .\r\n- ./app (if built)\r\n- go build -o app && ./app",
            "env_variable": "GO_RUN_CMD",
            "default_value": "go run main.go",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string",
            "field_type": "text"
        },
        {
            "name": "Go Server Port",
            "description": "Port your Go web server listens on.\r\n\r\nExample: 3000 or 8080",
            "env_variable": "GO_PORT",
            "default_value": "3000",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|integer|min:1|max:65535",
            "field_type": "text"
        }
    ]
}
